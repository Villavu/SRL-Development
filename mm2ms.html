<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Minimap to Mainscreen &mdash; SRL  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=5929fcd5"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MainScreen" href="mainscreen.html" />
    <link rel="prev" title="Bank" href="bank.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SRL
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="random.html">Random</a></li>
<li class="toctree-l1"><a class="reference internal" href="pixelshift.html">Pixelshift</a></li>
<li class="toctree-l1"><a class="reference internal" href="time.html">Time</a></li>
<li class="toctree-l1"><a class="reference internal" href="mouse.html">Mouse</a></li>
<li class="toctree-l1"><a class="reference internal" href="keyboard.html">Keyboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="tpoint.html">TPoint</a></li>
<li class="toctree-l1"><a class="reference internal" href="drawing.html">Drawing</a></li>
<li class="toctree-l1"><a class="reference internal" href="wrappers.html">Wrappers</a></li>
<li class="toctree-l1"><a class="reference internal" href="tboxarrays.html">TBoxArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="tcircle.html">TCircle</a></li>
<li class="toctree-l1"><a class="reference internal" href="matrix.html">Mouse.Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="math.html">Math</a></li>
<li class="toctree-l1"><a class="reference internal" href="integerarrays.html">TIntegerArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="string.html">String</a></li>
<li class="toctree-l1"><a class="reference internal" href="color.html">Color</a></li>
<li class="toctree-l1"><a class="reference internal" href="trectangle.html">TRectangle</a></li>
<li class="toctree-l1"><a class="reference internal" href="extendedarrays.html">TExtendedArray</a></li>
<li class="toctree-l1"><a class="reference internal" href="tbox.html">TBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="tpointarrays.html">TPointArray</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="depositbox.html">DepositBox</a></li>
<li class="toctree-l1"><a class="reference internal" href="prayer.html">Prayer</a></li>
<li class="toctree-l1"><a class="reference internal" href="prayer.html#minimap">Minimap</a></li>
<li class="toctree-l1"><a class="reference internal" href="rsclient.html">RSClient</a></li>
<li class="toctree-l1"><a class="reference internal" href="bank.html">Bank</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Minimap to Mainscreen</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#type-tmm2ms">type TMM2MS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#var-mm2ms">var MM2MS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-arrtoms">Minimap.ArrToMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-vectoms">Minimap.VecToMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-pointtoms">Minimap.PointToMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-vectomsrect">Minimap.VecToMsRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-pointtomsrect">Minimap.PointToMsRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-gettilems">Minimap.GetTileMS</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-statictomsrect">Minimap.StaticToMsRect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-statictoms">Minimap.StaticToMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-getzoomrectangle">Minimap.GetZoomRectangle</a></li>
<li class="toctree-l2"><a class="reference internal" href="#minimap-pointinzoomrectangle">Minimap.PointInZoomRectangle()</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mainscreen-pointtomm">Mainscreen.PointToMM</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mainscreen-normalizedistance">MainScreen.NormalizeDistance</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mainscreen-getplayerbox">MainScreen.GetPlayerBox</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mainscreen-facepoint">MainScreen.FacePoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#options-setzoomlevel">Options.SetZoomLevel</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="mainscreen.html">MainScreen</a></li>
<li class="toctree-l1"><a class="reference internal" href="login.html">Login</a></li>
<li class="toctree-l1"><a class="reference internal" href="combat.html">Combat</a></li>
<li class="toctree-l1"><a class="reference internal" href="combat.html#minimap">Minimap</a></li>
<li class="toctree-l1"><a class="reference internal" href="chat.html">Chat</a></li>
<li class="toctree-l1"><a class="reference internal" href="magic.html">Magic</a></li>
<li class="toctree-l1"><a class="reference internal" href="keybindings.html">Keybindings</a></li>
<li class="toctree-l1"><a class="reference internal" href="craftscreen.html">CraftScreen</a></li>
<li class="toctree-l1"><a class="reference internal" href="misc.html">Misc</a></li>
<li class="toctree-l1"><a class="reference internal" href="inventory.html">Inventory</a></li>
<li class="toctree-l1"><a class="reference internal" href="xpbar.html">XPBar</a></li>
<li class="toctree-l1"><a class="reference internal" href="antiban.html">Antiban</a></li>
<li class="toctree-l1"><a class="reference internal" href="grandexchange.html">GrandExchange</a></li>
<li class="toctree-l1"><a class="reference internal" href="make.html">Make</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="walker_map.html">WalkerMap</a></li>
<li class="toctree-l1"><a class="reference internal" href="webgraph.html">Web Graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="webber.html">Webber</a></li>
<li class="toctree-l1"><a class="reference internal" href="walker.html">Walker</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="itemfinder.html">Item Finder</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SRL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Minimap to Mainscreen</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/mm2ms.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="minimap-to-mainscreen">
<h1>Minimap to Mainscreen<a class="headerlink" href="#minimap-to-mainscreen" title="Link to this heading"></a></h1>
<p>The core for our minimap to mainscreen projection.
Supports rotation, and zoom, and resizable client.</p>
<p>MM2MS extends the Minimap interface as well as the mainscreen interface with
functionality to convert coordinates to &amp; from the minimap to the mainscreen.</p>
<hr class="docutils" />
<section id="type-tmm2ms">
<h2>type TMM2MS<a class="headerlink" href="#type-tmm2ms" title="Link to this heading"></a></h2>
<blockquote>
<div><dl>
<dt>type</dt><dd><dl class="simple">
<dt>TMM2MS = record</dt><dd><p>BASE_W, BASE_H: Int32;        // the size of the area we project to (mainscreen size)
MainScreen.Middle.X, MainScreen.Middle.Y: Int32;            // the center of the area we project to (mainscreen center)
MMCX, MMCY: Int32;            // the center of the area we project from (minimap center)
SCALE_MIN, SCALE_MAX: Double; // direct zoom (relates to BASE)
ZOOM: Double;                 // current zoom
YSHIFT: Double;               // zooming may cause mid-Y to shift</p>
</dd>
</dl>
<p>end;</p>
</dd>
</dl>
</div></blockquote>
<p>The comments explains it. This is the datastructure MM2MS uses.</p>
</section>
<hr class="docutils" />
<section id="var-mm2ms">
<h2>var MM2MS<a class="headerlink" href="#var-mm2ms" title="Link to this heading"></a></h2>
<blockquote>
<div><p>var MM2MS: TMM2MS;</p>
</div></blockquote>
<p>The global variable which you would refer to.</p>
<hr class="docutils" />
<section id="minimap">
<h3>Minimap<a class="headerlink" href="#minimap" title="Link to this heading"></a></h3>
<p>Extend the minimap-functionality with MM2MS functions</p>
</section>
</section>
<hr class="docutils" />
<section id="minimap-arrtoms">
<h2>Minimap.ArrToMs<a class="headerlink" href="#minimap-arrtoms" title="Link to this heading"></a></h2>
<blockquote>
<div><p>function TRSMinimap.ArrToMs(Arr: Vector3Array; Roll:Single=$FFFF): TPointArray; overload;
function TRSMinimap.ArrToMs(Arr: TPointArray; Roll:Single=$FFFF): TPointArray; overload;</p>
</div></blockquote>
<p>Takes array of points on the minimap, returns mainscreen projected array of points.
The first method takes a vector3 array as input, so we can pass height as well, and more detailed coordinates to scale.</p>
</section>
<hr class="docutils" />
<section id="minimap-vectoms">
<h2>Minimap.VecToMs<a class="headerlink" href="#minimap-vectoms" title="Link to this heading"></a></h2>
<p>function TRSMinimap.VecToMs(Vec: Vector3; Roll:Single=$FFFF): TPoint;</p>
<p>Takes a single coordinate as a Vector3 on the minimap, and converts it to a point on the mainscreen.</p>
<p><em>ROLL is the compass angle, by leaving it default it will gather the compass angle itself.</em></p>
</section>
<hr class="docutils" />
<section id="minimap-pointtoms">
<h2>Minimap.PointToMs<a class="headerlink" href="#minimap-pointtoms" title="Link to this heading"></a></h2>
<p>function TRSMinimap.PointToMs(PT: TPoint; Roll:Single=$FFFF): TPoint;</p>
<p>Takes a single coordinate as a TPoint on the minimap, and converts it to a point on the mainscreen.</p>
<p><em>ROLL is the compass angle, by leaving it default it will gather the compass angle itself.</em></p>
</section>
<hr class="docutils" />
<section id="minimap-vectomsrect">
<h2>Minimap.VecToMsRect<a class="headerlink" href="#minimap-vectomsrect" title="Link to this heading"></a></h2>
<p>function TRSMinimap.VecToMsRect(Vec: Vector3; WESize, NSSize: Double = 1; Roll:Single=$FFFF): TRectangle;</p>
<p>Takes a single coordinate as a Vector3 on the minimap, and converts it to a rectangle / tile on the mainscreen.</p>
<p><em>WESize</em> is the size of the rectangle we want to get from west-to-east measured in RS tiles.
<em>NSSize</em> is the size of the rectangle we want to get from north-to-south measured in RS tiles.</p>
<p>By default this values are 1 which will return you one single tile.
If you wanted to get the tiles of a runecrafting altar for example which is 3 by 3 tiles you would set both to 3.</p>
<p><em>ROLL is the compass angle, by leaving it default it will gather the compass angle itself.</em></p>
</section>
<hr class="docutils" />
<section id="minimap-pointtomsrect">
<h2>Minimap.PointToMsRect<a class="headerlink" href="#minimap-pointtomsrect" title="Link to this heading"></a></h2>
<p>function TRSMinimap.PointToMsRect(PT: TPoint; Roll:Single=$FFFF): TRectangle;</p>
<p>Takes a single coordinate as a TPoint on the minimap, and converts it to a rectangle / tile on the mainscreen.</p>
<p><em>WESize</em> is the size of the rectangle we want to get from west-to-east measured in RS tiles.
<em>NSSize</em> is the size of the rectangle we want to get from north-to-south measured in RS tiles.</p>
<p>By default this values are 1 which will return you one single tile.
If you wanted to get the tiles of a runecrafting altar for example which is 3 by 3 tiles you would set both to 3.</p>
<p><em>ROLL is the compass angle, by leaving it default it will gather the compass angle itself.</em></p>
</section>
<hr class="docutils" />
<section id="minimap-gettilems">
<h2>Minimap.GetTileMS<a class="headerlink" href="#minimap-gettilems" title="Link to this heading"></a></h2>
<p>function TRSMinimap.GetTileMS(Loc: TPoint; TileVector: Vector3; Offset: Vector2 = [0, 0]; Roll: Single = $FFFF): TRectangle;</p>
<p>This is a more general usage version of the previous 2 functions. This one can take height into account throught the <strong>TileVector</strong>.</p>
<p>TileVector is used to specify the size and height of the tile:
<strong>TileVector.X</strong> is the size of the rectangle from west to east in game.
<strong>TileVector.Y</strong> is the size of the rectangle from north to south in game.
<strong>TileVector.Z</strong> is the height of the rectangle in game. There’s no way to accurately measure it but for a rough idea, a player’s height is about 6 or 7.</p>
<p><em>ROLL is the compass angle, by leaving it default it will gather the compass angle itself.</em></p>
</section>
<hr class="docutils" />
<section id="minimap-statictomsrect">
<h2>Minimap.StaticToMsRect<a class="headerlink" href="#minimap-statictomsrect" title="Link to this heading"></a></h2>
<p>function TRSMinimap.StaticToMsRect(StaticMMPoint: TPoint; Height:Int32=0): TRectangle;</p>
<p>Takes static minimap coordinate, rotates it to compass angle, and returns a rectangle on the mainscreen
The static point is therefor gathered at north, and it will rotate it as expected.</p>
<p><em>WESize</em> is the size of the rectangle we want to get from west-to-east measured in RS tiles.
<em>NSSize</em> is the size of the rectangle we want to get from north-to-south measured in RS tiles.</p>
</section>
<hr class="docutils" />
<section id="minimap-statictoms">
<h2>Minimap.StaticToMs<a class="headerlink" href="#minimap-statictoms" title="Link to this heading"></a></h2>
<p>function TRSMinimap.StaticToMs(StaticMMPoint: TPoint; Height:Int32=0): TPoint;</p>
<p>This is the same as the above, only that it returns a single point on the mainscreen.</p>
</section>
<hr class="docutils" />
<section id="minimap-getzoomrectangle">
<h2>Minimap.GetZoomRectangle<a class="headerlink" href="#minimap-getzoomrectangle" title="Link to this heading"></a></h2>
<p>function TRSMinimap.GetZoomRectangle(): TRectangle;</p>
<p>This function returns an accurate rectangle of what’s visible on the MainScreen on the Minimap.
This can be used to know if it’s possible to make something visible by adjusting the zoom level or rotating the camera.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Debug</span><span class="p">(</span><span class="n">Minimap</span><span class="o">.</span><span class="n">GetZoomRectangle</span><span class="p">());</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="minimap-pointinzoomrectangle">
<h2>Minimap.PointInZoomRectangle()<a class="headerlink" href="#minimap-pointinzoomrectangle" title="Link to this heading"></a></h2>
<p>function Minimap.PointInZoomRectangle(P: TPoint): Boolean;</p>
<p>Check if a given point is within our zoom rectangle, in other words, in visible in the Mainscreen.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">P</span> <span class="o">:=</span> <span class="n">Minimap</span><span class="o">.</span><span class="n">GetDots</span><span class="p">(</span><span class="n">ERSMinimapDot</span><span class="o">.</span><span class="n">ITEM</span><span class="p">)[</span><span class="mi">0</span><span class="p">];</span> <span class="o">//</span><span class="n">find</span> <span class="n">an</span> <span class="n">item</span> <span class="n">dot</span> <span class="ow">and</span> <span class="n">returns</span> <span class="n">it</span><span class="s1">&#39;s coodinates.</span>
<span class="n">WriteLn</span> <span class="n">Minimap</span><span class="o">.</span><span class="n">PointInZoomRadius</span><span class="p">(</span><span class="n">P</span><span class="p">);</span>
</pre></div>
</div>
<hr class="docutils" />
<section id="mainscreen">
<h3>Mainscreen<a class="headerlink" href="#mainscreen" title="Link to this heading"></a></h3>
<p>Extend the mainscreen-functionality with MS2MM function</p>
</section>
</section>
<hr class="docutils" />
<section id="mainscreen-pointtomm">
<h2>Mainscreen.PointToMM<a class="headerlink" href="#mainscreen-pointtomm" title="Link to this heading"></a></h2>
<p>function TRSMainScreen.PointToMM(MS: TPoint; Height: Int32=0; Accuracy:Double=0.2): Vector3;</p>
<p>Takes a mainscreen point and converts it to a point on the minimap.</p>
<p>Returns a Vector3 which includes input height. Conversion to a TPoint if that’s what you need is simply
done by calling <cite>.ToPoint</cite> on the result.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">WriteLn</span> <span class="n">Mainscreen</span><span class="o">.</span><span class="n">PointToMM</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">140</span><span class="p">),</span> <span class="mi">2</span><span class="p">);</span>
<span class="n">WriteLn</span> <span class="n">Mainscreen</span><span class="o">.</span><span class="n">PointToMM</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">140</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="o">.</span><span class="n">ToPoint</span><span class="p">();</span> <span class="o">//</span> <span class="k">as</span> <span class="n">a</span> <span class="n">TPoint</span> <span class="p">(</span><span class="n">lost</span> <span class="n">accuracy</span><span class="p">)</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="mainscreen-normalizedistance">
<h2>MainScreen.NormalizeDistance<a class="headerlink" href="#mainscreen-normalizedistance" title="Link to this heading"></a></h2>
<div class="highlight-pascal notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span><span class="nc">TRSMainScreen</span><span class="o">.</span><span class="nf">NormalizeDistance</span><span class="p">(</span><span class="n">Dist</span><span class="o">:</span><span class="w"> </span><span class="n">Int32</span><span class="o">;</span><span class="w"> </span><span class="n">Accuracy</span><span class="o">:</span><span class="w"> </span><span class="kt">Single</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1.05</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">Int32</span><span class="o">;</span>
</pre></div>
</div>
<p>Converts a distance acquired from the <strong>fixed client* and **default zoom</strong> to the
current mainscreen.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading"></a></h3>
<div class="highlight-pascal notranslate"><div class="highlight"><pre><span></span><span class="c1">// 20 pixels on the fixed client and default zoom(50) is currently x pixels at the current zoom &amp; client size.</span>
<span class="nb">WriteLn</span><span class="p">(</span><span class="n">MainScreen</span><span class="o">.</span><span class="n">TranslateDistance</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="o">;</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="mainscreen-getplayerbox">
<h2>MainScreen.GetPlayerBox<a class="headerlink" href="#mainscreen-getplayerbox" title="Link to this heading"></a></h2>
<p>function TRSMainScreen.GetPlayerBox: TBox;</p>
<p>Returns a box surrounding our player. Works at any zoom level.</p>
</section>
<hr class="docutils" />
<section id="mainscreen-facepoint">
<h2>MainScreen.FacePoint<a class="headerlink" href="#mainscreen-facepoint" title="Link to this heading"></a></h2>
<p>function TRSMainScreen.FacePoint(P: TPoint; Randomness: Int32 = 0): Boolean;</p>
<p>Rotates the camera to face point <cite>P</cite>.</p>
</section>
<hr class="docutils" />
<section id="options-setzoomlevel">
<h2>Options.SetZoomLevel<a class="headerlink" href="#options-setzoomlevel" title="Link to this heading"></a></h2>
<p>function TRSOptions.SetZoomLevel(Level: Int32): Boolean; override;</p>
<p>Override to automatically update MM2MS.ZoomLevel.</p>
<hr class="docutils" />
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="bank.html" class="btn btn-neutral float-left" title="Bank" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mainscreen.html" class="btn btn-neutral float-right" title="MainScreen" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, SRL Group.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>  

  <style>
         .wy-nav-content { max-width: none; }
  </style>



</body>
</html>